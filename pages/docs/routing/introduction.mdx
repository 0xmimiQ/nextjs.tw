{/*
---
description: Next.js has a built-in, opinionated, and file-system based Router. You can learn how it works here.
---
*/}
# 路由

Next.js 擁有一個基於 [頁面](/docs/basic-features/pages.md) 建立出來的檔案系統。

當一個檔案被加進 `pages` 資料夾，它會自動地變成可用的路由。

這些被加入 `pages` 資料夾的檔案被用來定義最常見的模式。

#### 索引路由

路由器會自動地將資料夾根目錄中命名為 `index` 的檔案配置路由。

- `pages/index.js` → `/`
- `pages/blog/index.js` → `/blog`

#### 巢狀路由

路由器支援槽狀檔案。如果你建立了一個槽狀的資料夾結構，檔案仍然會依照相同的方式自動地配置路由。

- `pages/blog/first-post.js` → `/blog/first-post`
- `pages/dashboard/settings/username.js` → `/dashboard/settings/username`

#### 動態路由片段

要匹配一個動態路由片段，你可以使用中括弧。這可以使你匹配到具名參數。

- `pages/blog/[slug].js` → `/blog/:slug` (`/blog/hello-world`)
- `pages/[username]/settings.js` → `/:username/settings` (`/foo/settings`)
- `pages/post/[...all].js` → `/post/*` (`/post/2020/id/title`)

> 查看 [Dynamic Routes documentation](/docs/routing/dynamic-routes.md) 頁面可以學習更多動態路由如何運作。

## 連結頁面

Next.js 的路由允許你使用用戶端路由跳轉頁面，相似於單頁式應用程式。

提供了一個稱作 `Link` 的 React 組件來做用戶端路由跳轉。

```jsx
import Link from 'next/link'

function Home() {
  return (
    <ul>
      <li>
        <Link href="/">
          <a>Home</a>
        </Link>
      </li>
      <li>
        <Link href="/about">
          <a>About Us</a>
        </Link>
      </li>
      <li>
        <Link href="/blog/hello-world">
          <a>Blog Post</a>
        </Link>
      </li>
    </ul>
  )
}

export default Home
```

上面的例子用了多個連結，每個連結對應著已知頁面的一個路徑（`href`）：

- `/` → `pages/index.js`
- `/about` → `pages/about.js`
- `/blog/hello-world` → `pages/blog/[slug].js`

任何 `<Link />` 在視圖中（初始化或捲動），頁面使用 [靜態生成](/docs/basic-features/data-fetching/get-static-props.md) ，將會默認預先取回連結（包含對應的資料）。使用 [伺服器端渲染](/docs/basic-features/data-fetching/get-server-side-props.md) 對應的資料 _不是_ 使用預先取回連結。

### 連結動態路徑

你也可以使用插值來建立一個路徑， [動態路由片段](#dynamic-route-segments) 可以派得上用場。舉例來說，顯示一個已經被當成屬性傳入組件的文章清單：

```jsx
import Link from 'next/link'

function Posts({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link href={`/blog/${encodeURIComponent(post.slug)}`}>
            <a>{post.title}</a>
          </Link>
        </li>
      ))}
    </ul>
  )
}

export default Posts
```

> [`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) 被用來保持範例的路徑兼容 utf-8 。
> [`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) is used in the example to keep the path utf-8 compatible.

或者，使用 URL 物件（ URL Object ）:

```jsx
import Link from 'next/link'

function Posts({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link
            href={{
              pathname: '/blog/[slug]',
              query: { slug: post.slug },
            }}
          >
            <a>{post.title}</a>
          </Link>
        </li>
      ))}
    </ul>
  )
}

export default Posts
```

現在，以下的情境我們使用 URL 物件建立路徑，而不是使用插值：

- `pathname` 是 `pages` 資料夾裡的頁面名稱。如同 `/blog/[slug]` 這個例子一樣。
- `query` 是一個有著動態片段的物件。如同 `slug` 這個例子一樣。

## 注入路由

<details>
  <summary><b>範例</b></summary>
  <ul>
    <li><a href="https://github.com/vercel/next.js/tree/canary/examples/dynamic-routing">動態路由</a></li>
  </ul>
</details>

在 React 中的組件，你可以使用 [`useRouter`](/docs/api-reference/next/router.md#useRouter) 或者 [`withRouter`](/docs/api-reference/next/router.md#withRouter) 來存取 [`router` 物件](/docs/api-reference/next/router.md#router-object)。

一般來說，我們推薦使用 [`useRouter`](/docs/api-reference/next/router.md#useRouter)。

## 學習更多

路由器被分成許多的部分：

<div className="card">
  <a href="/docs/api-reference/next/link.md">
    <b>連結:</b>
    <small>處理用戶端導覽。</small>
  </a>
</div>

<div className="card">
  <a href="/docs/api-reference/next/router.md">
    <b>路由:</b>
    <small>借助路由應用程式介面，在頁面中實現更好的目標。</small>
  </a>
</div>